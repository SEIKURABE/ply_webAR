(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70],{8804:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/webAR",function(){return n(7269)}])},7269:function(e,t,n){"use strict";n.r(t),n.d(t,{DeviceOrientationControlsStory:function(){return m},default:function(){return b}});var i=n(5893),r=n(6465),a=n.n(r),s=n(7294),o=n(5029),c=n(7462),l=n(3249),u=n(9477);let h=e=>"function"==typeof e,d=s.forwardRef(({envMap:e,resolution:t=256,frames:n=1/0,makeDefault:i,children:r,...a},o)=>{var d;let f=(0,l.z)(({set:e})=>e),v=(0,l.z)(({camera:e})=>e),g=(0,l.z)(({size:e})=>e),p=s.useRef(null),E=s.useRef(null),m=function(e,t,n){let{gl:i,size:r,viewport:a}=(0,l.z)(),o="number"==typeof e?e:r.width*a.dpr,c="number"==typeof t?t:r.height*a.dpr,{samples:h=0,depth:d,...f}=("number"==typeof e?void 0:e)||{},v=s.useMemo(()=>{let e;return e=new u.WebGLRenderTarget(o,c,{minFilter:u.LinearFilter,magFilter:u.LinearFilter,encoding:i.outputEncoding,type:u.HalfFloatType,...f}),d&&(e.depthTexture=new u.DepthTexture(o,c,u.FloatType)),e.samples=h,e},[]);return s.useLayoutEffect(()=>{v.setSize(o,c),h&&(v.samples=h)},[h,v,o,c]),s.useEffect(()=>()=>v.dispose(),[]),v}(t);s.useLayoutEffect(()=>{a.manual||(p.current.aspect=g.width/g.height)},[g,a]),s.useLayoutEffect(()=>{p.current.updateProjectionMatrix()});let w=0,b=null,x=h(r);return(0,l.A)(t=>{x&&(n===1/0||w<n)&&(E.current.visible=!1,t.gl.setRenderTarget(m),b=t.scene.background,e&&(t.scene.background=e),t.gl.render(t.scene,p.current),t.scene.background=b,t.gl.setRenderTarget(null),E.current.visible=!0,w++)}),s.useLayoutEffect(()=>{if(i)return f(()=>({camera:p.current})),()=>f(()=>({camera:v}))},[p,i,f]),s.createElement(s.Fragment,null,s.createElement("perspectiveCamera",(0,c.Z)({ref:(d=[p,o],function(e){d.forEach(function(t){"function"==typeof t?t(e):null!=t&&(t.current=e)})})},a),!x&&r),s.createElement("group",{ref:E},x&&r(m.texture)))});var f=n(1180);class v extends u.EventDispatcher{constructor(e){super(),(0,f.Z)(this,"object",void 0),(0,f.Z)(this,"changeEvent",{type:"change"}),(0,f.Z)(this,"EPS",1e-6),(0,f.Z)(this,"enabled",!0),(0,f.Z)(this,"deviceOrientation",{alpha:0,beta:0,gamma:0}),(0,f.Z)(this,"screenOrientation",0),(0,f.Z)(this,"alphaOffset",0),(0,f.Z)(this,"onDeviceOrientationChangeEvent",e=>{this.deviceOrientation=e}),(0,f.Z)(this,"onScreenOrientationChangeEvent",()=>{this.screenOrientation=window.orientation||0}),(0,f.Z)(this,"zee",new u.Vector3(0,0,1)),(0,f.Z)(this,"euler",new u.Euler),(0,f.Z)(this,"q0",new u.Quaternion),(0,f.Z)(this,"q1",new u.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5))),(0,f.Z)(this,"setObjectQuaternion",(e,t,n,i,r)=>{this.euler.set(n,t,-i,"YXZ"),e.setFromEuler(this.euler),e.multiply(this.q1),e.multiply(this.q0.setFromAxisAngle(this.zee,-r))}),(0,f.Z)(this,"connect",()=>{this.onScreenOrientationChangeEvent(),void 0!==window.DeviceOrientationEvent&&"function"==typeof window.DeviceOrientationEvent.requestPermission?window.DeviceOrientationEvent.requestPermission().then(e=>{"granted"==e&&(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent))}).catch(e=>{console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",e)}):(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent)),this.enabled=!0}),(0,f.Z)(this,"disconnect",()=>{window.removeEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.removeEventListener("deviceorientation",this.onDeviceOrientationChangeEvent),this.enabled=!1}),(0,f.Z)(this,"lastQuaternion",new u.Quaternion),(0,f.Z)(this,"update",()=>{if(!1===this.enabled)return;let e=this.deviceOrientation;if(e){let t=e.alpha?u.MathUtils.degToRad(e.alpha)+this.alphaOffset:0,n=e.beta?u.MathUtils.degToRad(e.beta):0,i=e.gamma?u.MathUtils.degToRad(e.gamma):0,r=this.screenOrientation?u.MathUtils.degToRad(this.screenOrientation):0;this.setObjectQuaternion(this.object.quaternion,t,n,i,r),8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS&&(this.lastQuaternion.copy(this.object.quaternion),this.dispatchEvent(this.changeEvent))}}),(0,f.Z)(this,"dispose",()=>this.disconnect()),this.object=e,this.object.rotation.reorder("YXZ"),this.connect()}}let g=s.forwardRef((e,t)=>{let{camera:n,onChange:i,makeDefault:r,...a}=e,o=(0,l.z)(e=>e.camera),u=(0,l.z)(e=>e.invalidate),h=(0,l.z)(e=>e.get),d=(0,l.z)(e=>e.set),f=n||o,[g]=s.useState(()=>new v(f));return s.useEffect(()=>{let e=e=>{u(),i&&i(e)};return null==g||null==g.addEventListener||g.addEventListener("change",e),()=>null==g?void 0:null==g.removeEventListener?void 0:g.removeEventListener("change",e)},[i,g,u]),(0,l.A)(()=>null==g?void 0:g.update(),-1),s.useEffect(()=>(null==g||g.connect(),()=>null==g?void 0:g.dispose()),[g]),s.useEffect(()=>{if(r){let e=h().controls;return d({controls:g}),()=>d({controls:e})}},[r,g]),g?s.createElement("primitive",(0,c.Z)({ref:t,object:g},a)):null});function p(e){let t=e+"Geometry";return s.forwardRef(({args:e,children:n,...i},r)=>s.createElement("mesh",(0,c.Z)({ref:r},i),s.createElement(t,{attach:"geometry",args:e}),n))}let E=p("box");function m(){let e=(0,s.useRef)([]),t=(0,s.useRef)(null);return console.log(e.current),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d,{ref:e}),(0,i.jsx)(g,{ref:t}),(0,i.jsxs)(E,{args:[100,100,100,4,4,4],children:[(0,i.jsx)("meshBasicMaterial",{wireframe:!0}),(0,i.jsx)("axesHelper",{args:[100]})]})]})}p("circle"),p("cone"),p("cylinder"),p("sphere"),p("plane"),p("tube"),p("torus"),p("torusKnot"),p("tetrahedron"),p("ring"),p("polyhedron"),p("icosahedron"),p("octahedron"),p("dodecahedron"),p("extrude"),p("lathe"),p("capsule");let w=()=>{let e=(0,s.useRef)(null);return(0,i.jsxs)("div",{className:"jsx-ec439ddf5ab7668e page-index",children:[(0,i.jsxs)(o.Xz,{ref:e,className:"canvas",camera:{position:[0,0,5]},children:[(0,i.jsx)("ambientLight",{intensity:1,className:"jsx-ec439ddf5ab7668e"}),(0,i.jsx)("axesHelper",{args:[1],className:"jsx-ec439ddf5ab7668e"}),(0,i.jsx)(s.Suspense,{fallback:null,children:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(m,{})})})]}),(0,i.jsx)(a(),{id:"ec439ddf5ab7668e",children:".page-index.jsx-ec439ddf5ab7668e{width:100%;height:100%;background-color:#555;position:absolute}"})]})};var b=w}},function(e){e.O(0,[737,137,774,888,179],function(){return e(e.s=8804)}),_N_E=e.O()}]);