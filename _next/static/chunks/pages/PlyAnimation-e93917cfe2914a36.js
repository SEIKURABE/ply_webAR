(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[840],{11752:function(e,t,r){e.exports=r(84785)},60664:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var n=r(67294),a=r(29095),s=r(15319),o=r(30398),i=r(74250),u=r(51349),l=r(85893),c=function(e){var t=e.geometries,r=e.material,a=e.frameDuration,o=(0,n.useState)(0),i=o[0],u=o[1],c=(0,n.useRef)(performance.now()),f=(0,n.useRef)(!0);return(0,n.useEffect)(function(){return f.current=!0,function(){f.current=!1}},[]),(0,s.F)(function(){if(f.current){var e=performance.now();e-c.current>a&&(u(function(e){return(e+1)%t.length}),c.current=e)}}),(0,l.jsx)("points",{geometry:t[i],material:r,rotation:[0,Math.PI,0]})},f=function(e){var t=e.modelUrls,r=e.pointSize,s=e.frameDuration,f=(0,n.useState)([]),p=f[0],h=f[1],d=(0,n.useState)(!0),m=d[0],g=d[1],y=(0,n.useState)(0),x=y[0],v=y[1],b=(0,n.useRef)(new i.UY4({size:void 0===r?.01:r,vertexColors:!0})),w=(0,n.useRef)(!0);return((0,n.useEffect)(function(){w.current=!0;var e=new u.F,r=[],n=0,a=[];return t.forEach(function(s,o){var u=new AbortController;a.push(u),fetch(s,{signal:u.signal}).then(function(e){return e.blob()}).then(function(a){var s=new FileReader;s.onload=function(){if(w.current){var a=s.result,u=e.parse(a);u.attributes.normal||u.computeVertexNormals(),u.computeBoundingBox();var l=u.boundingBox;if(l){var c=new i.Pa4;l.getCenter(c),u.translate(-c.x,-c.y,-c.z)}r[o]=u,v(++n),n===t.length&&(h(r),g(!1))}},s.readAsArrayBuffer(a)}).catch(function(e){"AbortError"!==e.name&&console.error("Failed to load PLY file:",e)})}),function(){w.current=!1,r.forEach(function(e){return e.dispose()}),b.current.dispose(),a.forEach(function(e){return e.abort()})}},[t]),m)?(0,l.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,l.jsxs)("p",{children:["Loading ",x,"/",t.length," models..."]}),(0,l.jsx)("progress",{value:x,max:t.length,style:{width:"100%"}})]}):0===p.length?null:(0,l.jsxs)(a.Xz,{children:[(0,l.jsx)("ambientLight",{intensity:.8}),(0,l.jsx)("directionalLight",{position:[10,10,5],intensity:1}),(0,l.jsx)(c,{geometries:p,material:b.current,frameDuration:void 0===s?50:s}),(0,l.jsx)("axesHelper",{args:[1]}),(0,l.jsx)(o.z,{enablePan:!0,enableZoom:!0,enableRotate:!0})]})},p=r(11752),h=r.n(p)()().publicRuntimeConfig.basePath||"";function d(){var e=Array.from({length:50},function(e,t){return"".concat(h,"/model/demo/frames/frame").concat(t,".ply")});return(0,l.jsx)("div",{style:{width:"100%",height:"100%",position:"absolute"},children:(0,l.jsx)(f,{modelUrls:e})})}},81940:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/PlyAnimation",function(){return r(60664)}])},34155:function(e){var t,r,n,a=e.exports={};function s(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u=[],l=!1,c=-1;function f(){l&&n&&(l=!1,n.length?u=n.concat(u):c=-1,u.length&&p())}function p(){if(!l){var e=i(f);l=!0;for(var t=u.length;t;){for(n=u,u=[];++c<t;)n&&n[c].run();c=-1,t=u.length}n=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function d(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new h(e,t)),1!==u.length||l||i(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=d,a.addListener=d,a.once=d,a.off=d,a.removeListener=d,a.removeAllListeners=d,a.emit=d,a.prependListener=d,a.prependOnceListener=d,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}},51349:function(e,t,r){"use strict";r.d(t,{F:function(){return s}});var n=r(74250);let a=new n.Ilk;class s extends n.aNw{constructor(e){super(e),this.propertyNameMapping={},this.customPropertyMapping={}}load(e,t,r,a){let s=this,o=new n.hH6(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(r){try{t(s.parse(r))}catch(t){a?a(t):console.error(t),s.manager.itemError(e)}},r,a)}setPropertyNameMapping(e){this.propertyNameMapping=e}setCustomPropertyNameMapping(e){this.customPropertyMapping=e}parse(e){let t;function r(e,t=0){let r;let n="",a=/^ply([\s\S]*)end_header(\r\n|\r|\n)/.exec(e);null!==a&&(n=a[1]);let s={comments:[],elements:[],headerLength:t,objInfo:""},o=n.split(/\r\n|\r|\n/);for(let e=0;e<o.length;e++){let t=o[e];if(""===(t=t.trim()))continue;let n=t.split(/\s+/),a=n.shift();switch(t=n.join(" "),a){case"format":s.format=n[0],s.version=n[1];break;case"comment":s.comments.push(t);break;case"element":void 0!==r&&s.elements.push(r),(r={}).name=n[0],r.count=parseInt(n[1]),r.properties=[];break;case"property":r.properties.push(function(e,t){let r={type:e[0]};return"list"===r.type?(r.name=e[3],r.countType=e[1],r.itemType=e[2]):r.name=e[1],r.name in t&&(r.name=t[r.name]),r}(n,p.propertyNameMapping));break;case"obj_info":s.objInfo=t;break;default:console.log("unhandled",a,n)}}return void 0!==r&&s.elements.push(r),s}function s(e,t){switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(e);case"float":case"double":case"float32":case"float64":return parseFloat(e)}}function i(){let e={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[],faceVertexColors:[]};for(let t of Object.keys(p.customPropertyMapping))e[t]=[];return e}function u(e){let t=e.map(e=>e.name);function r(e){for(let r=0,n=e.length;r<n;r++){let n=e[r];if(t.includes(n))return n}return null}return{attrX:r(["x","px","posx"])||"x",attrY:r(["y","py","posy"])||"y",attrZ:r(["z","pz","posz"])||"z",attrNX:r(["nx","normalx"]),attrNY:r(["ny","normaly"]),attrNZ:r(["nz","normalz"]),attrS:r(["s","u","texture_u","tx"]),attrT:r(["t","v","texture_v","ty"]),attrR:r(["red","diffuse_red","r","diffuse_r"]),attrG:r(["green","diffuse_green","g","diffuse_g"]),attrB:r(["blue","diffuse_blue","b","diffuse_b"])}}function l(e,t){let r,n;let a=i();r=null!==(n=/end_header\s+(\S[\s\S]*\S|\S)\s*$/.exec(e))?n[1].split(/\s+/):[];let l=new o(r);e:for(let e=0;e<t.elements.length;e++){let r=t.elements[e],n=u(r.properties);for(let e=0;e<r.count;e++){let e=function(e,t){let r={};for(let n=0;n<e.length;n++){if(t.empty())return null;if("list"===e[n].type){let a=[],o=s(t.next(),e[n].countType);for(let r=0;r<o;r++){if(t.empty())return null;a.push(s(t.next(),e[n].itemType))}r[e[n].name]=a}else r[e[n].name]=s(t.next(),e[n].type)}return r}(r.properties,l);if(!e)break e;f(a,r.name,e,n)}}return c(a)}function c(e){let t=new n.u9r;for(let r of(e.indices.length>0&&t.setIndex(e.indices),t.setAttribute("position",new n.a$l(e.vertices,3)),e.normals.length>0&&t.setAttribute("normal",new n.a$l(e.normals,3)),e.uvs.length>0&&t.setAttribute("uv",new n.a$l(e.uvs,2)),e.colors.length>0&&t.setAttribute("color",new n.a$l(e.colors,3)),(e.faceVertexUvs.length>0||e.faceVertexColors.length>0)&&(t=t.toNonIndexed(),e.faceVertexUvs.length>0&&t.setAttribute("uv",new n.a$l(e.faceVertexUvs,2)),e.faceVertexColors.length>0&&t.setAttribute("color",new n.a$l(e.faceVertexColors,3))),Object.keys(p.customPropertyMapping)))e[r].length>0&&t.setAttribute(r,new n.a$l(e[r],p.customPropertyMapping[r].length));return t.computeBoundingSphere(),t}function f(e,t,r,s){if("vertex"===t)for(let t of(e.vertices.push(r[s.attrX],r[s.attrY],r[s.attrZ]),null!==s.attrNX&&null!==s.attrNY&&null!==s.attrNZ&&e.normals.push(r[s.attrNX],r[s.attrNY],r[s.attrNZ]),null!==s.attrS&&null!==s.attrT&&e.uvs.push(r[s.attrS],r[s.attrT]),null!==s.attrR&&null!==s.attrG&&null!==s.attrB&&(a.setRGB(r[s.attrR]/255,r[s.attrG]/255,r[s.attrB]/255,n.KI_),e.colors.push(a.r,a.g,a.b)),Object.keys(p.customPropertyMapping)))for(let n of p.customPropertyMapping[t])e[t].push(r[n]);else if("face"===t){let t=r.vertex_indices||r.vertex_index,o=r.texcoord;3===t.length?(e.indices.push(t[0],t[1],t[2]),o&&6===o.length&&(e.faceVertexUvs.push(o[0],o[1]),e.faceVertexUvs.push(o[2],o[3]),e.faceVertexUvs.push(o[4],o[5]))):4===t.length&&(e.indices.push(t[0],t[1],t[3]),e.indices.push(t[1],t[2],t[3])),null!==s.attrR&&null!==s.attrG&&null!==s.attrB&&(a.setRGB(r[s.attrR]/255,r[s.attrG]/255,r[s.attrB]/255,n.KI_),e.faceVertexColors.push(a.r,a.g,a.b),e.faceVertexColors.push(a.r,a.g,a.b),e.faceVertexColors.push(a.r,a.g,a.b))}}let p=this;if(e instanceof ArrayBuffer){let n=new Uint8Array(e),{headerText:a,headerLength:s}=function(e){let t=0,r=!0,n="",a=[],s=new TextDecoder().decode(e.subarray(0,5)),o=/^ply\r\n/.test(s);do{let s=String.fromCharCode(e[t++]);"\n"!==s&&"\r"!==s?n+=s:("end_header"===n&&(r=!1),""!==n&&(a.push(n),n=""))}while(r&&t<e.length);return!0===o&&t++,{headerText:a.join("\r")+"\r",headerLength:t}}(n),o=r(a,s);if("ascii"===o.format){let e=new TextDecoder().decode(n);t=l(e,o)}else t=function(e,t){let r=i(),n="binary_little_endian"===t.format,a=new DataView(e,t.headerLength),s,o=0;for(let e=0;e<t.elements.length;e++){let i=t.elements[e],l=i.properties,c=u(l);!function(e,t,r){function n(e,t,r){switch(t){case"int8":case"char":return{read:t=>e.getInt8(t),size:1};case"uint8":case"uchar":return{read:t=>e.getUint8(t),size:1};case"int16":case"short":return{read:t=>e.getInt16(t,r),size:2};case"uint16":case"ushort":return{read:t=>e.getUint16(t,r),size:2};case"int32":case"int":return{read:t=>e.getInt32(t,r),size:4};case"uint32":case"uint":return{read:t=>e.getUint32(t,r),size:4};case"float32":case"float":return{read:t=>e.getFloat32(t,r),size:4};case"float64":case"double":return{read:t=>e.getFloat64(t,r),size:8}}}for(let a=0,s=e.length;a<s;a++){let s=e[a];"list"===s.type?(s.countReader=n(t,s.countType,r),s.valueReader=n(t,s.itemType,r)):s.valueReader=n(t,s.type,r)}}(l,a,n);for(let e=0;e<i.count;e++){s=function(e,t){let r={},n=0;for(let a=0;a<t.length;a++){let s=t[a],o=s.valueReader;if("list"===s.type){let t=[],a=s.countReader.read(e+n);n+=s.countReader.size;for(let r=0;r<a;r++)t.push(o.read(e+n)),n+=o.size;r[s.name]=t}else r[s.name]=o.read(e+n),n+=o.size}return[r,n]}(o,l),o+=s[1];let e=s[0];f(r,i.name,e,c)}}return c(r)}(e,o)}else t=l(e,r(e));return t}}class o{constructor(e){this.arr=e,this.i=0}empty(){return this.i>=this.arr.length}next(){return this.arr[this.i++]}}}},function(e){e.O(0,[934,737,95,398,774,888,179],function(){return e(e.s=81940)}),_N_E=e.O()}]);